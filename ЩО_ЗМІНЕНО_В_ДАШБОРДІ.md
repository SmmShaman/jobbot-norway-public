# üéØ –©–æ —Å–∞–º–µ –∑–º—ñ–Ω–µ–Ω–æ —ñ –¥–µ —Ü–µ –≤ –¥–∞—à–±–æ—Ä–¥—ñ

## üìã –ö–æ—Ä–æ—Ç–∫–∞ –≤—ñ–¥–ø–æ–≤—ñ–¥—å

**–©–æ —è –∑—Ä–æ–±–∏–≤:**
- ‚úÖ –û–Ω–æ–≤–∏–≤ **Worker v2** (backend) –¥–ª—è —Ä–æ–±–æ—Ç–∏ –∑ FINN.no —á–µ—Ä–µ–∑ Playwright
- ‚úÖ –°—Ç–≤–æ—Ä–∏–≤ SQL —Ñ—É–Ω–∫—Ü—ñ—ó –¥–ª—è —à–≤–∏–¥–∫–æ–≥–æ –≤–∏—Ç—è–≥—É–≤–∞–Ω–Ω—è –ª—ñ–Ω–∫—ñ–≤
- ‚úÖ –°—Ç–≤–æ—Ä–∏–≤ —Ç–µ—Å—Ç–æ–≤—ñ —Å–∫—Ä–∏–ø—Ç–∏
- ‚ùå **–ù–ï –∑–º—ñ–Ω—é–≤–∞–≤ –¥–∞—à–±–æ—Ä–¥** - –≤—ñ–Ω –≤–∂–µ –±—É–≤ –≥–æ—Ç–æ–≤–∏–π –∑ –ø–æ–ø–µ—Ä–µ–¥–Ω—å–æ—ó —Å–µ—Å—ñ—ó!

**–î–µ —Ü–µ –≤ –¥–∞—à–±–æ—Ä–¥—ñ:**
- üìÑ –°—Ç–æ—Ä—ñ–Ω–∫–∞ **Jobs** (`/jobs`) - —Ç—É—Ç –≤—ñ–¥–æ–±—Ä–∞–∂–∞—é—Ç—å—Å—è –∑–Ω–∞–π–¥–µ–Ω—ñ –≤–∞–∫–∞–Ω—Å—ñ—ó
- üìÑ –°—Ç–æ—Ä—ñ–Ω–∫–∞ **Scan** (—è–∫—â–æ —î) - –∑–≤—ñ–¥—Å–∏ –∑–∞–ø—É—Å–∫–∞—é—Ç—å—Å—è —Å–∫–∞–Ω—É–≤–∞–Ω–Ω—è

---

## üîç –î–µ—Ç–∞–ª—å–Ω–æ: –©–æ —è –∑—Ä–æ–±–∏–≤

### 1Ô∏è‚É£ Backend (Worker v2) - `worker/worker_v2.py`

**–ü—Ä–æ–±–ª–µ–º–∞:** FINN.no - —Ü–µ React –¥–æ–¥–∞—Ç–æ–∫, –∑–≤–∏—á–∞–π–Ω—ñ HTTP –∑–∞–ø–∏—Ç–∏ –Ω–µ –ø—Ä–∞—Ü—é—é—Ç—å

**–†—ñ—à–µ–Ω–Ω—è:** –î–æ–¥–∞–≤ Playwright –¥–ª—è —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥—É JavaScript

**–©–æ –∑–º—ñ–Ω–∏–ª–æ—Å—å:**
```python
# –°–¢–ê–†–ò–ô –ö–û–î (–Ω–µ –ø—Ä–∞—Ü—é–≤–∞–≤):
response = requests.get(finn_url)  # ‚ùå –û—Ç—Ä–∏–º—É–≤–∞–≤ –ø—É—Å—Ç—É HTML –æ–±–æ–ª–æ–Ω–∫—É

# –ù–û–í–ò–ô –ö–û–î (–ø—Ä–∞—Ü—é—î):
browser = playwright.chromium.launch()
page.goto(finn_url)
page.wait_for_selector('a[href*="finnkode"]')  # ‚úÖ –ß–µ–∫–∞—î –ø–æ–∫–∏ React –∑–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç—å –¥–∂–æ–±–∏
html = page.content()  # –í–∏—Ç—è–≥—É—î –ø–æ–≤–Ω–∏–π HTML –∑ —Ä–µ–Ω–¥–µ—Ä–µ–Ω–∏–º–∏ –ø–æ—Å–∏–ª–∞–Ω–Ω—è–º–∏
```

**–§–∞–π–ª:** `worker/worker_v2.py` (—Ä—è–¥–∫–∏ 116-177)

---

### 2Ô∏è‚É£ SQL –§—É–Ω–∫—Ü—ñ—ó - `database/finn_link_extractor_function.sql`

**–°—Ç–≤–æ—Ä–µ–Ω–æ 3 —Ñ—É–Ω–∫—Ü—ñ—ó –≤ Supabase:**

1. **`extract_finn_job_links(html_content)`**
   - –í–∏—Ç—è–≥—É—î finnkode –∑ HTML —á–µ—Ä–µ–∑ regex
   - –ó–Ω–∞—Ö–æ–¥–∏—Ç—å –≤—Å—ñ –ø–æ—Å–∏–ª–∞–Ω–Ω—è –≤–∏–¥—É `finnkode=123456`

2. **`create_jobs_from_finn_links(user_id, scan_task_id, html_content)`**
   - –°—Ç–≤–æ—Ä—é—î –∑–∞–ø–∏—Å–∏ –≤ —Ç–∞–±–ª–∏—Ü—ñ `jobs` –æ–¥—Ä–∞–∑—É –ø—ñ—Å–ª—è –≤–∏—Ç—è–≥—É–≤–∞–Ω–Ω—è –ª—ñ–Ω–∫—ñ–≤
   - –í—Å—Ç–∞–Ω–æ–≤–ª—é—î `skyvern_status = 'PENDING'`
   - –û–±—Ä–æ–±–ª—è—î –¥—É–±–ª—ñ–∫–∞—Ç–∏ (ON CONFLICT)

3. **`get_pending_skyvern_jobs(user_id, limit)`**
   - –ü–æ–≤–µ—Ä—Ç–∞—î –¥–∂–æ–±–∏ —â–æ —á–µ–∫–∞—é—Ç—å –æ–±—Ä–æ–±–∫–∏ Skyvern

**–°—Ç–∞—Ç—É—Å:** ‚ö†Ô∏è –ü–æ—Ç—Ä—ñ–±–Ω–æ –≤—Å—Ç–∞–Ω–æ–≤–∏—Ç–∏ –≤—Ä—É—á–Ω—É (–¥–∏–≤. —ñ–Ω—Å—Ç—Ä—É–∫—Ü—ñ—é –Ω–∏–∂—á–µ)

---

### 3Ô∏è‚É£ –î–∞—à–±–æ—Ä–¥ (Frontend) - `web-app/src/pages/Jobs.tsx`

**–¶–ï –í–ñ–ï –ë–£–õ–û –ó–†–û–ë–õ–ï–ù–û –í –ü–û–ü–ï–†–ï–î–ù–Ü–ô –°–ï–°–Ü–á!**

–Ø –ù–ï –∑–º—ñ–Ω—é–≤–∞–≤ –¥–∞—à–±–æ—Ä–¥ –≤ —Ü—ñ–π —Å–µ—Å—ñ—ó. –í—ñ–Ω –≤–∂–µ –º–∞—î:

‚úÖ **Real-time –æ–Ω–æ–≤–ª–µ–Ω–Ω—è** (–∫–æ–∂–Ω—ñ 5 —Å–µ–∫—É–Ω–¥):
```typescript
useEffect(() => {
    const interval = setInterval(() => {
        refetch();  // –û–Ω–æ–≤–ª—é—î —Å–ø–∏—Å–æ–∫ –¥–∂–æ–±—ñ–≤
    }, 5000);
    return () => clearInterval(interval);
}, [refetch]);
```

‚úÖ **–ü—Ä–æ–≥—Ä–µ—Å–∏–≤–Ω–µ –≤—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—è:**
```typescript
// –î–∂–æ–± PENDING - –ø–æ–∫–∞–∑—É—î —Ç—ñ–ª—å–∫–∏ –ª—ñ–Ω–∫
{isPending && (
    <div>
        <span>FINN Code: {job.finnkode}</span>
        <span>‚è≥ Waiting for details...</span>
    </div>
)}

// –î–∂–æ–± COMPLETED - –ø–æ–∫–∞–∑—É—î –≤—Å—ñ –¥–µ—Ç–∞–ª—ñ
{isCompleted && (
    <div>
        <h3>{job.title}</h3>
        <p>üè¢ {job.company}</p>
        <p>üìç {job.location}</p>
        ...
    </div>
)}
```

**–§–∞–π–ª:** `web-app/src/pages/Jobs.tsx` (–≤–µ—Å—å —Ñ–∞–π–ª)

---

## üìç –î–µ –∑–Ω–∞—Ö–æ–¥–∏—Ç—å—Å—è –≤ –¥–∞—à–±–æ—Ä–¥—ñ?

### –°—Ç–æ—Ä—ñ–Ω–∫–∞ Jobs (–¥–µ –≤—ñ–¥–æ–±—Ä–∞–∂–∞—é—Ç—å—Å—è –≤–∞–∫–∞–Ω—Å—ñ—ó)

**URL:** https://jobbot-norway.netlify.app/jobs

**–©–æ —Ç–∞–º —î:**
1. **–§—ñ–ª—å—Ç—Ä–∏** (–∑–≤–µ—Ä—Ö—É):
   - –ü–æ —Å—Ç–∞—Ç—É—Å—É: NEW / REVIEWED / RELEVANT / APPLIED
   - –ü–æ –¥–∂–µ—Ä–µ–ª—É: FINN / NAV
   - –ü–æ Skyvern —Å—Ç–∞—Ç—É—Å—É: PENDING / PROCESSING / COMPLETED / FAILED

2. **–°–ø–∏—Å–æ–∫ –¥–∂–æ–±—ñ–≤** (–∫–∞—Ä—Ç–∫–∏):
   ```
   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
   ‚îÇ üìå Senior Developer                     ‚îÇ
   ‚îÇ üè¢ Acme Corp                            ‚îÇ
   ‚îÇ üìç Oslo, Norway                         ‚îÇ
   ‚îÇ üíº Full-time                            ‚îÇ
   ‚îÇ üìß jobs@acme.com                        ‚îÇ
   ‚îÇ                                         ‚îÇ
   ‚îÇ [Mark Relevant] [View Details]         ‚îÇ
   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
   ```

3. **Real-time —ñ–Ω–¥–∏–∫–∞—Ç–æ—Ä** (—è–∫—â–æ —î PENDING –∞–±–æ PROCESSING –¥–∂–æ–±–∏):
   ```
   ‚è≥ Processing jobs: 3 pending, 2 in progress
   ```

---

### –°—Ç–æ—Ä—ñ–Ω–∫–∞ Scan (–∑–≤—ñ–¥–∫–∏ –∑–∞–ø—É—Å–∫–∞—é—Ç—å—Å—è —Å–∫–∞–Ω—É–≤–∞–Ω–Ω—è)

**URL:** https://jobbot-norway.netlify.app/scan (—è–∫—â–æ —ñ—Å–Ω—É—î)

**–ê–±–æ —á–µ—Ä–µ–∑ API:**
```typescript
// –°—Ç–≤–æ—Ä–∏—Ç–∏ scan_task —á–µ—Ä–µ–∑ Supabase
const { data } = await supabase
    .from('scan_tasks')
    .insert({
        user_id: '—Ç–≤—ñ–π_user_id',
        source: 'FINN',
        url: 'https://www.finn.no/job/search?...',
        status: 'PENDING'
    });
```

---

## üîÑ –Ø–∫ –ø—Ä–∞—Ü—é—î —Å–∏—Å—Ç–µ–º–∞ (–∫—Ä–æ–∫ –∑–∞ –∫—Ä–æ–∫–æ–º)

### –ö–†–û–ö 1: –°—Ç–≤–æ—Ä–µ–Ω–Ω—è scan_task

**–•—Ç–æ:** –ö–æ—Ä–∏—Å—Ç—É–≤–∞—á —á–µ—Ä–µ–∑ –¥–∞—à–±–æ—Ä–¥ (–∞–±–æ API)
**–©–æ:** –°—Ç–≤–æ—Ä—é—î—Ç—å—Å—è –∑–∞–ø–∏—Å –≤ `scan_tasks` –∑ —Å—Ç–∞—Ç—É—Å–æ–º `PENDING`
**–î–µ –≤ –∫–æ–¥—ñ:** Frontend form –Ω–∞ —Å—Ç–æ—Ä—ñ–Ω—Ü—ñ Scan (—è–∫—â–æ —î)

```sql
INSERT INTO scan_tasks (user_id, source, url, status)
VALUES ('user123', 'FINN', 'https://finn.no/job/search?...', 'PENDING');
```

---

### –ö–†–û–ö 2: Worker v2 –ø—ñ–¥—Ö–æ–ø–ª—é—î task

**–•—Ç–æ:** Worker v2 (–∑–∞–ø—É—â–µ–Ω–∏–π –Ω–∞ –ª–æ–∫–∞–ª—å–Ω–æ–º—É PC)
**–©–æ:** –ö–æ–∂–Ω—ñ 10 —Å–µ–∫—É–Ω–¥ –ø–µ—Ä–µ–≤—ñ—Ä—è—î PENDING tasks
**–î–µ –≤ –∫–æ–¥—ñ:** `worker/worker_v2.py` —Ä—è–¥–æ–∫ 424

```python
tasks = self.get_pending_tasks()  # SELECT * FROM scan_tasks WHERE status='PENDING'
```

---

### –ö–†–û–ö 3: Playwright –≤–∏—Ç—è–≥—É—î –ª—ñ–Ω–∫–∏ (–ù–û–í–ï!)

**–•—Ç–æ:** Worker v2
**–©–æ:** –ó–∞–ø—É—Å–∫–∞—î –±—Ä–∞—É–∑–µ—Ä, —Ä–µ–Ω–¥–µ—Ä–∏—Ç—å React, –≤–∏—Ç—è–≥—É—î finnkode
**–î–µ –≤ –∫–æ–¥—ñ:** `worker/worker_v2.py` —Ä—è–¥–∫–∏ 116-177

```python
# 1. –ó–∞–ø—É—Å–∫ Playwright
browser = playwright.chromium.launch()
page.goto('https://finn.no/job/search?...')

# 2. –ß–µ–∫–∞—î–º–æ –ø–æ–∫–∏ React –∑–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç—å –¥–∂–æ–±–∏
page.wait_for_selector('a[href*="finnkode"]')

# 3. –í–∏—Ç—è–≥—É—î–º–æ HTML –∑ —Ä–µ–Ω–¥–µ—Ä–µ–Ω–∏–º–∏ –ø–æ—Å–∏–ª–∞–Ω–Ω—è–º–∏
html = page.content()

# 4. –ó–Ω–∞—Ö–æ–¥–∏–º–æ –≤—Å—ñ finnkode (regex)
matches = re.findall(r'finnkode=(\d+)', html)
# –†–µ–∑—É–ª—å—Ç–∞—Ç: ['378776848', '378776849', '378776850']
```

---

### –ö–†–û–ö 4: –°—Ç–≤–æ—Ä–µ–Ω–Ω—è jobs –∑–∞–ø–∏—Å—ñ–≤ (–ù–û–í–ï!)

**–•—Ç–æ:** SQL —Ñ—É–Ω–∫—Ü—ñ—è `create_jobs_from_finn_links()`
**–©–æ:** –°—Ç–≤–æ—Ä—é—î –∑–∞–ø–∏—Å –¥–ª—è –∫–æ–∂–Ω–æ–≥–æ –∑–Ω–∞–π–¥–µ–Ω–æ–≥–æ finnkode
**–î–µ –≤ –∫–æ–¥—ñ:** `database/finn_link_extractor_function.sql`

```sql
-- –î–ª—è –∫–æ–∂–Ω–æ–≥–æ finnkode —Å—Ç–≤–æ—Ä—é—î—Ç—å—Å—è –∑–∞–ø–∏—Å:
INSERT INTO jobs (
    user_id,
    scan_task_id,
    finnkode,
    url,
    source,
    skyvern_status,  -- ‚ö†Ô∏è 'PENDING'
    is_processed     -- ‚ö†Ô∏è false
) VALUES (...);
```

**‚è±Ô∏è –ß–∞—Å:** 5-10 —Å–µ–∫—É–Ω–¥ –¥–ª—è –≤—Å—ñ—Ö –ª—ñ–Ω–∫—ñ–≤ –æ–¥—Ä–∞–∑—É

**üìä –†–µ–∑—É–ª—å—Ç–∞—Ç –≤ –¥–∞—à–±–æ—Ä–¥—ñ:**
```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ üìå Job #378776848                       ‚îÇ
‚îÇ üîó https://finn.no/...finnkode=378776848‚îÇ
‚îÇ ‚è≥ Waiting for details...               ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

---

### –ö–†–û–ö 5: –î–∞—à–±–æ—Ä–¥ –æ–Ω–æ–≤–ª—é—î—Ç—å—Å—è (–∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ!)

**–•—Ç–æ:** React –∫–æ–º–ø–æ–Ω–µ–Ω—Ç Jobs
**–©–æ:** –ö–æ–∂–Ω—ñ 5 —Å–µ–∫—É–Ω–¥ —Ä–æ–±–∏—Ç—å –∑–∞–ø–∏—Ç –¥–æ Supabase
**–î–µ –≤ –∫–æ–¥—ñ:** `web-app/src/pages/Jobs.tsx` —Ä—è–¥–∫–∏ ~40-45

```typescript
// –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è –∫–æ–∂–Ω—ñ 5 —Å–µ–∫—É–Ω–¥
setInterval(() => {
    refetch();  // SELECT * FROM jobs WHERE user_id = '...'
}, 5000);
```

**üëÄ –©–æ –±–∞—á–∏—Ç—å –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á:**
- –î–∂–æ–±–∏ –∑'—è–≤–ª—è—é—Ç—å—Å—è –û–î–†–ê–ó–£ –ø—ñ—Å–ª—è –≤–∏—Ç—è–≥—É–≤–∞–Ω–Ω—è –ª—ñ–Ω–∫—ñ–≤
- –°–ø–æ—á–∞—Ç–∫—É —Ç—ñ–ª—å–∫–∏ finnkode + –ª—ñ–Ω–∫
- –°—Ç–∞—Ç—É—Å: "‚è≥ Waiting for details..."

---

### –ö–†–û–ö 6: Skyvern –æ–±—Ä–æ–±–ª—è—î –∫–æ–∂–µ–Ω job

**–•—Ç–æ:** Worker v2
**–©–æ:** –î–ª—è –∫–æ–∂–Ω–æ–≥–æ PENDING job –∑–∞–ø—É—Å–∫–∞—î Skyvern
**–î–µ –≤ –∫–æ–¥—ñ:** `worker/worker_v2.py` —Ä—è–¥–∫–∏ 349-374

```python
# –î–ª—è –∫–æ–∂–Ω–æ–≥–æ job –∑ skyvern_status='PENDING':
for job in pending_jobs:
    # 1. –ó–∞–ø—É—Å–∫ Skyvern –¥–ª—è –≤–∏—Ç—è–≥—É–≤–∞–Ω–Ω—è –¥–µ—Ç–∞–ª–µ–π
    result = call_skyvern('DETAIL', job.url)

    # 2. –û–Ω–æ–≤–ª–µ–Ω–Ω—è job –∑ –¥–µ—Ç–∞–ª—è–º–∏
    update_job_with_details(job.id, result)
    # –í—Å—Ç–∞–Ω–æ–≤–ª—é—î:
    # - title, company, location, description...
    # - skyvern_status = 'COMPLETED'
    # - is_processed = true
```

**‚è±Ô∏è –ß–∞—Å:** 30-60 —Å–µ–∫—É–Ω–¥ –Ω–∞ –ö–û–ñ–ï–ù job

---

### –ö–†–û–ö 7: –î–∞—à–±–æ—Ä–¥ –ø–æ–∫–∞–∑—É—î –ø–æ–≤–Ω—ñ –¥–µ—Ç–∞–ª—ñ

**–•—Ç–æ:** React –∫–æ–º–ø–æ–Ω–µ–Ω—Ç Jobs (–∞–≤—Ç–æ–æ–Ω–æ–≤–ª–µ–Ω–Ω—è)
**–©–æ:** –ü–æ–∫–∞–∑—É—î –≤—Å—é —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—é –ø—Ä–æ –≤–∞–∫–∞–Ω—Å—ñ—é
**–î–µ –≤ –∫–æ–¥—ñ:** `web-app/src/pages/Jobs.tsx`

**üëÄ –©–æ –±–∞—á–∏—Ç—å –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á:**
```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ ‚úÖ Senior Python Developer              ‚îÇ
‚îÇ üè¢ Acme Corp AS                         ‚îÇ
‚îÇ üìç Oslo, Norway                         ‚îÇ
‚îÇ üíº Full-time                            ‚îÇ
‚îÇ üí∞ 700,000 - 900,000 NOK                ‚îÇ
‚îÇ üìß jobs@acme.com                        ‚îÇ
‚îÇ üìû +47 123 45 678                       ‚îÇ
‚îÇ ‚è∞ Deadline: 2025-12-01                 ‚îÇ
‚îÇ                                         ‚îÇ
‚îÇ [Mark Relevant] [View Details] [Apply] ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

---

## üé¨ –í—ñ–∑—É–∞–ª—ñ–∑–∞—Ü—ñ—è –ø—Ä–æ—Ü–µ—Å—É

```
üë§ –ö–æ—Ä–∏—Å—Ç—É–≤–∞—á
    ‚Üì (—Å—Ç–≤–æ—Ä—é—î scan_task —á–µ—Ä–µ–∑ –¥–∞—à–±–æ—Ä–¥)

üìã Supabase: scan_tasks
    status: PENDING
    url: https://finn.no/job/search?...

    ‚Üì (Worker v2 –ø—ñ–¥—Ö–æ–ø–ª—é—î –∫–æ–∂–Ω—ñ 10—Å)

ü§ñ Worker v2
    ‚Üì
üåê Playwright –∑–∞–ø—É—Å–∫–∞—î –±—Ä–∞—É–∑–µ—Ä
    ‚è≥ –†–µ–Ω–¥–µ—Ä–∏—Ç—å React –¥–æ–¥–∞—Ç–æ–∫ FINN.no (5-10—Å)
    ‚úÖ –í–∏—Ç—è–≥—É—î HTML –∑ –ø–æ—Å–∏–ª–∞–Ω–Ω—è–º–∏

    ‚Üì
üîç SQL —Ñ—É–Ω–∫—Ü—ñ—è extract_finn_job_links()
    ‚úÖ –ó–Ω–∞—Ö–æ–¥–∏—Ç—å: finnkode=378776848, 378776849, 378776850

    ‚Üì
üíæ Supabase: jobs (—Å—Ç–≤–æ—Ä–µ–Ω–æ 3 –∑–∞–ø–∏—Å–∏)
    ‚îú‚îÄ finnkode=378776848, skyvern_status=PENDING
    ‚îú‚îÄ finnkode=378776849, skyvern_status=PENDING
    ‚îî‚îÄ finnkode=378776850, skyvern_status=PENDING

    ‚Üì (5 —Å–µ–∫—É–Ω–¥ –ø—ñ–∑–Ω—ñ—à–µ)

üñ•Ô∏è –î–ê–®–ë–û–†–î –æ–Ω–æ–≤–ª—é—î—Ç—å—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ
    ‚úÖ –ü–æ–∫–∞–∑—É—î 3 –Ω–æ–≤—ñ –¥–∂–æ–±–∏ (—Ç—ñ–ª—å–∫–∏ –ª—ñ–Ω–∫–∏)

    ‚Üì (–ø–∞—Ä–∞–ª–µ–ª—å–Ω–æ)

ü§ñ Worker v2 –∑–∞–ø—É—Å–∫–∞—î Skyvern –¥–ª—è –∫–æ–∂–Ω–æ–≥–æ job
    ‚îú‚îÄ Job 1: Skyvern ‚Üí –≤–∏—Ç—è–≥—É—î –¥–µ—Ç–∞–ª—ñ (30-60—Å)
    ‚îú‚îÄ Job 2: Skyvern ‚Üí –≤–∏—Ç—è–≥—É—î –¥–µ—Ç–∞–ª—ñ (30-60—Å)
    ‚îî‚îÄ Job 3: Skyvern ‚Üí –≤–∏—Ç—è–≥—É—î –¥–µ—Ç–∞–ª—ñ (30-60—Å)

    ‚Üì (–∫–æ–∂–Ω—ñ 5 —Å–µ–∫—É–Ω–¥)

üñ•Ô∏è –î–ê–®–ë–û–†–î –æ–Ω–æ–≤–ª—é—î—Ç—å—Å—è
    ‚îú‚îÄ Job 1: ‚úÖ COMPLETED (–ø–æ–≤–Ω—ñ –¥–µ—Ç–∞–ª—ñ)
    ‚îú‚îÄ Job 2: üîÑ PROCESSING (—á–µ–∫–∞—î–º–æ...)
    ‚îî‚îÄ Job 3: ‚è≥ PENDING (—á–µ–∫–∞—î–º–æ...)

    ‚Üì (—á–µ—Ä–µ–∑ 3-5 —Ö–≤–∏–ª–∏–Ω)

üñ•Ô∏è –î–ê–®–ë–û–†–î (—Ñ—ñ–Ω–∞–ª—å–Ω–∏–π —Å—Ç–∞–Ω)
    ‚îú‚îÄ Job 1: ‚úÖ Senior Developer @ Acme Corp
    ‚îú‚îÄ Job 2: ‚úÖ Backend Engineer @ TechCo
    ‚îî‚îÄ Job 3: ‚úÖ Full Stack Dev @ StartupX
```

---

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª—ñ–≤

### Backend (Worker)
```
worker/
‚îú‚îÄ‚îÄ worker_v2.py           ‚Üê üÜï –û–Ω–æ–≤–ª–µ–Ω–æ: –¥–æ–¥–∞–Ω–æ Playwright
‚îú‚îÄ‚îÄ requirements.txt       ‚Üê üÜï –û–Ω–æ–≤–ª–µ–Ω–æ: –¥–æ–¥–∞–Ω–æ playwright==1.40.0
‚îî‚îÄ‚îÄ skyvern_templates/
    ‚îî‚îÄ‚îÄ job_detail_template.json
```

### Frontend (Dashboard)
```
web-app/src/
‚îú‚îÄ‚îÄ pages/
‚îÇ   ‚îî‚îÄ‚îÄ Jobs.tsx          ‚Üê ‚úÖ –ë–ï–ó –ó–ú–Ü–ù (–≤–∂–µ –±—É–≤ –≥–æ—Ç–æ–≤–∏–π!)
‚îî‚îÄ‚îÄ hooks/
    ‚îî‚îÄ‚îÄ useJobs.ts        ‚Üê ‚úÖ –ë–ï–ó –ó–ú–Ü–ù
```

### Database
```
database/
‚îú‚îÄ‚îÄ finn_link_extractor_function.sql  ‚Üê üÜï –°–¢–í–û–†–ï–ù–û
‚îî‚îÄ‚îÄ cleanup_old_scans.sql             ‚Üê üÜï –°–¢–í–û–†–ï–ù–û (–¥–ª—è –æ—á–∏—â–µ–Ω–Ω—è)
```

### Scripts (—Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è)
```
scripts/
‚îú‚îÄ‚îÄ test_finn_playwright.py    ‚Üê üÜï –°–¢–í–û–†–ï–ù–û (–ø—Ä–∞—Ü—é—î!)
‚îú‚îÄ‚îÄ test_finn_extraction.py    ‚Üê üÜï –°–¢–í–û–†–ï–ù–û (–ø–æ–∫–∞–∑—É—î —á–æ–º—É regex –Ω–µ –ø—Ä–∞—Ü—é—î)
‚îî‚îÄ‚îÄ debug_finn_html.py         ‚Üê üÜï –°–¢–í–û–†–ï–ù–û (–∞–Ω–∞–ª—ñ–∑—É—î —Å—Ç—Ä—É–∫—Ç—É—Ä—É)
```

---

## ‚úÖ –ß–µ–∫–ª–∏—Å—Ç: –©–æ –ø–æ—Ç—Ä—ñ–±–Ω–æ –∑—Ä–æ–±–∏—Ç–∏ –∑–∞—Ä–∞–∑

### 1Ô∏è‚É£ –í–∏–¥–∞–ª–∏—Ç–∏ —Å—Ç–∞—Ä—ñ —Å–∫–∞–Ω—É–≤–∞–Ω–Ω—è (–ó–ê–†–ê–ó)

**–Ü–Ω—Å—Ç—Ä—É–∫—Ü—ñ—è:**
1. –í—ñ–¥–∫—Ä–∏–π: https://supabase.com/dashboard/project/ptrmidlhfdbybxmyovtm/sql/new
2. –°–∫–æ–ø—ñ—é–π –∑ —Ñ–∞–π–ª—É: `database/cleanup_old_scans.sql`
3. –†–æ–∑–∫–æ–º–µ–Ω—Ç—É–π —Ü—ñ 2 —Ä—è–¥–∫–∏:
   ```sql
   DELETE FROM jobs;
   DELETE FROM scan_tasks;
   ```
4. –ù–∞—Ç–∏—Å–Ω–∏ **Run** (F5)

---

### 2Ô∏è‚É£ –í—Å—Ç–∞–Ω–æ–≤–∏—Ç–∏ SQL —Ñ—É–Ω–∫—Ü—ñ—ó (–û–ë–û–í'–Ø–ó–ö–û–í–û!)

**–Ü–Ω—Å—Ç—Ä—É–∫—Ü—ñ—è:**
1. –í—ñ–¥–∫—Ä–∏–π: https://supabase.com/dashboard/project/ptrmidlhfdbybxmyovtm/sql/new
2. –°–∫–æ–ø—ñ—é–π –í–°–ï –∑ —Ñ–∞–π–ª—É: `database/finn_link_extractor_function.sql`
3. –ù–∞—Ç–∏—Å–Ω–∏ **Run** (F5)

**–ü–µ—Ä–µ–≤—ñ—Ä–∫–∞:**
```sql
SELECT routine_name FROM information_schema.routines
WHERE routine_schema = 'public'
  AND routine_name LIKE '%finn%';
```

–ú–∞—î—à –ø–æ–±–∞—á–∏—Ç–∏:
- ‚úÖ create_jobs_from_finn_links
- ‚úÖ extract_finn_job_links
- ‚úÖ get_pending_skyvern_jobs

---

### 3Ô∏è‚É£ –í—Å—Ç–∞–Ω–æ–≤–∏—Ç–∏ Playwright –Ω–∞ –ª–æ–∫–∞–ª—å–Ω–æ–º—É PC

```bash
cd worker
pip install -r requirements.txt
playwright install chromium
```

---

### 4Ô∏è‚É£ –ü—Ä–æ—Ç–µ—Å—Ç—É–≤–∞—Ç–∏ –≤–∏—Ç—è–≥—É–≤–∞–Ω–Ω—è –ª—ñ–Ω–∫—ñ–≤

```bash
python scripts/test_finn_playwright.py
```

**–û—á—ñ–∫—É–≤–∞–Ω–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
```
üß™ Testing FINN.no Link Extraction with Playwright
============================================================
üåê Launching browser for: https://www.finn.no/job/search?...
‚úÖ Job listings loaded!

‚úÖ Found 1 unique job links:

1. finnkode=378776848
   URL: https://www.finn.no/job/fulltime/ad.html?finnkode=378776848
```

---

### 5Ô∏è‚É£ –ó–∞–ø—É—Å—Ç–∏—Ç–∏ Worker v2

```bash
cd worker
python worker_v2.py
```

---

### 6Ô∏è‚É£ –°—Ç–≤–æ—Ä–∏—Ç–∏ scan_task —á–µ—Ä–µ–∑ –¥–∞—à–±–æ—Ä–¥

**–í–∞—Ä—ñ–∞–Ω—Ç –ê:** –ß–µ—Ä–µ–∑ —Ñ–æ—Ä–º—É –≤ –¥–∞—à–±–æ—Ä–¥—ñ (—è–∫—â–æ —î —Å—Ç–æ—Ä—ñ–Ω–∫–∞ Scan)

**–í–∞—Ä—ñ–∞–Ω—Ç –ë:** –ß–µ—Ä–µ–∑ Supabase SQL:
```sql
INSERT INTO scan_tasks (user_id, source, url, status)
VALUES (
    '—Ç–≤—ñ–π_user_id',  -- ‚Üê –ó–∞–º—ñ–Ω–∏ –Ω–∞ —Å–≤—ñ–π user_id
    'FINN',
    'https://www.finn.no/job/search?location=2.20001.22034.20097&location=2.20001.22034.20098&location=2.20001.22034.20085&published=1',
    'PENDING'
);
```

---

### 7Ô∏è‚É£ –î–∏–≤–∏—Ç–∏—Å—å —è–∫ –¥–∂–æ–±–∏ –∑'—è–≤–ª—è—é—Ç—å—Å—è –≤ –¥–∞—à–±–æ—Ä–¥—ñ

**URL:** https://jobbot-norway.netlify.app/jobs

**–©–æ –ø–æ–±–∞—á–∏—à:**
1. **0-10 —Å–µ–∫—É–Ω–¥:** –î–∂–æ–±–∏ –∑'—è–≤–ª—è—é—Ç—å—Å—è —è–∫ –ª—ñ–Ω–∫–∏ (PENDING)
2. **10-60 —Å–µ–∫—É–Ω–¥:** –°—Ç–∞—Ç—É—Å –∑–º—ñ–Ω—é—î—Ç—å—Å—è –Ω–∞ PROCESSING
3. **60+ —Å–µ–∫—É–Ω–¥:** –°—Ç–∞—Ç—É—Å COMPLETED, –ø–æ–≤–Ω—ñ –¥–µ—Ç–∞–ª—ñ –≤—ñ–¥–æ–±—Ä–∞–∂–∞—é—Ç—å—Å—è

---

## üÜò –î–µ –¥–∏–≤–∏—Ç–∏—Å—å –ª–æ–≥–∏?

### Worker –ª–æ–≥–∏
```bash
tail -f worker/worker.log
```

### Supabase –ª–æ–≥–∏
https://supabase.com/dashboard/project/ptrmidlhfdbybxmyovtm/logs/explorer

### Browser DevTools (–¥–∞—à–±–æ—Ä–¥)
1. –í—ñ–¥–∫—Ä–∏–π –¥–∞—à–±–æ—Ä–¥: https://jobbot-norway.netlify.app/jobs
2. F12 ‚Üí Console
3. –î–∏–≤–∏—Å—å Network tab –¥–ª—è API –∑–∞–ø–∏—Ç—ñ–≤ –¥–æ Supabase

---

## üìä –ü–æ—Ä—ñ–≤–Ω—è–Ω–Ω—è: –î–æ vs –ü—ñ—Å–ª—è

| –©–æ | –î–û (Worker v1) | –ü–Ü–°–õ–Ø (Worker v2) |
|---|---|---|
| **–í–∏—Ç—è–≥—É–≤–∞–Ω–Ω—è –ª—ñ–Ω–∫—ñ–≤** | ‚ùå –ù–µ –ø—Ä–∞—Ü—é–≤–∞–ª–æ (–ø—É—Å—Ç–∏–π HTML) | ‚úÖ Playwright —Ä–µ–Ω–¥–µ—Ä–∏—Ç—å React (5-10—Å) |
| **–°—Ç–≤–æ—Ä–µ–Ω–Ω—è jobs** | ‚ùå –¢—ñ–ª—å–∫–∏ –ø—ñ—Å–ª—è Skyvern | ‚úÖ –û–î–†–ê–ó–£ –ø—ñ—Å–ª—è –≤–∏—Ç—è–≥—É–≤–∞–Ω–Ω—è –ª—ñ–Ω–∫—ñ–≤ |
| **–í—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—è –≤ –¥–∞—à–±–æ—Ä–¥—ñ** | ‚ùå –ù—ñ—á–æ–≥–æ –¥–æ –æ–±—Ä–æ–±–∫–∏ Skyvern | ‚úÖ –ó'—è–≤–ª—è—é—Ç—å—Å—è –º–∏—Ç—Ç—î–≤–æ —è–∫ –ª—ñ–Ω–∫–∏ |
| **–ß–∞—Å –¥–æ –ø–µ—Ä—à–æ–≥–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—É** | 30-60—Å (—á–µ–∫–∞—î–º–æ Skyvern) | 5-10—Å (–ª—ñ–Ω–∫–∏) |
| **–ö–æ—Ä–∏—Å—Ç—É–≤–∞—Ü—å–∫–∏–π –¥–æ—Å–≤—ñ–¥** | üòû –î–æ–≤–≥–µ –æ—á—ñ–∫—É–≤–∞–Ω–Ω—è | üòä –ú–∏—Ç—Ç—î–≤–∏–π feedback |

---

## üéØ –ü—ñ–¥—Å—É–º–æ–∫

### –©–æ —è –∑–º—ñ–Ω–∏–≤ –≤ —Ü—ñ–π —Å–µ—Å—ñ—ó:
1. ‚úÖ **Backend (Worker v2)** - –¥–æ–¥–∞–≤ Playwright –¥–ª—è FINN.no
2. ‚úÖ **SQL —Ñ—É–Ω–∫—Ü—ñ—ó** - —Å—Ç–≤–æ—Ä–∏–≤ –¥–ª—è —à–≤–∏–¥–∫–æ–≥–æ –≤–∏—Ç—è–≥—É–≤–∞–Ω–Ω—è –ª—ñ–Ω–∫—ñ–≤
3. ‚úÖ **–¢–µ—Å—Ç–æ–≤—ñ —Å–∫—Ä–∏–ø—Ç–∏** - –¥–ª—è –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏ —â–æ –≤—Å–µ –ø—Ä–∞—Ü—é—î
4. ‚úÖ **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—é** - –ø–æ–≤–Ω–∏–π –≥–∞–π–¥ –ø–æ –¥–µ–ø–ª–æ—é

### –©–æ –ù–ï –∑–º—ñ–Ω—é–≤–∞–≤:
- ‚ùå **–î–∞—à–±–æ—Ä–¥ (Frontend)** - –≤—ñ–Ω –≤–∂–µ –±—É–≤ –≥–æ—Ç–æ–≤–∏–π!
- ‚ùå **–ë–∞–∑–∞ –¥–∞–Ω–∏—Ö —Å—Ç—Ä—É–∫—Ç—É—Ä–∞** - —Ç–∞–±–ª–∏—Ü—ñ –∑–∞–ª–∏—à–∏–ª–∏—Å—å —Ç—ñ –∂
- ‚ùå **Skyvern** - –ø—Ä–∞—Ü—é—î —è–∫ —ñ —Ä–∞–Ω—ñ—à–µ

### –î–µ –∑–Ω–∞—Ö–æ–¥–∏—Ç—å—Å—è –≤ –¥–∞—à–±–æ—Ä–¥—ñ:
- üìÑ **Jobs page** (`/jobs`) - –≤—ñ–¥–æ–±—Ä–∞–∂–∞—î –≤–∞–∫–∞–Ω—Å—ñ—ó
- üîÑ **Auto-refresh** - –∫–æ–∂–Ω—ñ 5 —Å–µ–∫—É–Ω–¥
- üìä **Real-time —Å—Ç–∞—Ç—É—Å** - PENDING ‚Üí PROCESSING ‚Üí COMPLETED

### –©–æ –ø–æ—Ç—Ä—ñ–±–Ω–æ –∑—Ä–æ–±–∏—Ç–∏ –¢–û–ë–Ü:
1. ‚úÖ –í–∏–¥–∞–ª–∏—Ç–∏ —Å—Ç–∞—Ä—ñ scan_tasks (SQL —Å–∫—Ä–∏–ø—Ç –≥–æ—Ç–æ–≤–∏–π)
2. ‚úÖ –í—Å—Ç–∞–Ω–æ–≤–∏—Ç–∏ SQL —Ñ—É–Ω–∫—Ü—ñ—ó (—Ñ–∞–π–ª –≥–æ—Ç–æ–≤–∏–π)
3. ‚úÖ –í—Å—Ç–∞–Ω–æ–≤–∏—Ç–∏ Playwright –Ω–∞ –ª–æ–∫–∞–ª—å–Ω–æ–º—É PC
4. ‚úÖ –ó–∞–ø—É—Å—Ç–∏—Ç–∏ Worker v2
5. ‚úÖ –°—Ç–≤–æ—Ä–∏—Ç–∏ –Ω–æ–≤–∏–π scan_task
6. ‚úÖ –î–∏–≤–∏—Ç–∏—Å—å —è–∫ –¥–∂–æ–±–∏ –∑'—è–≤–ª—è—é—Ç—å—Å—è –≤ —Ä–µ–∞–ª—å–Ω–æ–º—É —á–∞—Å—ñ!

---

**–ì–æ—Ç–æ–≤–æ! –í—Å—ñ —Ñ–∞–π–ª–∏ —Å—Ç–≤–æ—Ä–µ–Ω—ñ, –∫–æ–¥ –æ–Ω–æ–≤–ª–µ–Ω–∏–π, –∑–∞–ª–∏—à–∏–ª–æ—Å—å —Ç—ñ–ª—å–∫–∏ –∑–∞–¥–µ–ø–ª–æ—ó—Ç–∏! üöÄ**
